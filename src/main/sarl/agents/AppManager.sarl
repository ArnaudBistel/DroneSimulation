package agents

import io.sarl.core.DefaultContextInteractions
import io.sarl.core.Lifecycle
import io.sarl.core.Logging
import map.SimulationMap
import io.sarl.core.Initialize
import controller.MainWindowController
import gui.DroneBody
import java.util.UUID
import io.sarl.core.Destroy
import org.arakhne.afc.math.geometry.d2.i.Point2i
import solutionSolver.FakeSimulationMap
import solutionSolver.simulatedAnnealing.SimulatedAnnealing
import solutionSolver.SolutionSolver

/** 
 * @author arnaud
 * 
 */
agent AppManager {
	uses Logging, Lifecycle, DefaultContextInteractions

	var map : FakeSimulationMap

	on Initialize {
		loggingName = "AppManager"
		info("AppManager created!")
		var controller = occurrence.parameters.get(0) as MainWindowController
		var droneBody = new DroneBody(200, 200, UUID::randomUUID)
		controller.addBody(droneBody)
		spawnInContext(1, Drone, defaultContext, droneBody)
		var t  : Point2i = new Point2i(0, 0)
		
		map = new FakeSimulationMap(10,1) //10 Clients + 1 Warehouse
		
		/* Testing droneEnergyCost function : Should print drone's max battery (1628)
		var simulatedAnnealing = new SimulatedAnnealing(map)
		info(SolutionSolver.droneEnergyCost(0.0, 11.0))
		info(SolutionSolver.droneEnergyCost(1.0, 95.0))
		info(SolutionSolver.droneEnergyCost(2.0, 90.0))
		info(SolutionSolver.droneEnergyCost(3.0, 85.0))
		info(SolutionSolver.droneEnergyCost(4.0, 80.0))
		info(SolutionSolver.droneEnergyCost(5.0, 75.0)) */
	}

	on Destroy {
	}
	
	def initMap(){
		
	}
}




